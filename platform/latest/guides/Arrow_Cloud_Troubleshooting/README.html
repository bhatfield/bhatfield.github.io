<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Arrow Cloud Troubleshooting</title>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta content="Scroll EclipseHelp Exporter" name="generator"/>

    <link type="text/css" rel="stylesheet"/>
    <link type="text/css" rel="stylesheet"/>
    <link type="text/css" rel="stylesheet" media="print"/>
</head>
<body>
    <div class="container">
        <div class="header"/>

        <div id="43299774" class="content">
            <h1>Arrow Cloud Troubleshooting</h1>
<ul class=" "><li class=" ">    <p>
<a class="document-link " href="#!/guide/Arrow_Cloud_Troubleshooting-section-43299774_ArrowCloudTroubleshooting-Exceptionsthrownupondeployment">Exceptions thrown upon deployment</a>    </p>
<ul class=" "><li class=" ">    <p>
<a class="document-link " href="#!/guide/Arrow_Cloud_Troubleshooting-section-43299774_ArrowCloudTroubleshooting-Exceptioninapp.jsoutsidestart()method">Exception in app.js outside start() method</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/Arrow_Cloud_Troubleshooting-section-43299774_ArrowCloudTroubleshooting-Exceptioninsideapp.jsstart()method">Exception inside app.js start() method</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/Arrow_Cloud_Troubleshooting-section-43299774_ArrowCloudTroubleshooting-Exceptioninacontroller,outsideafunction">Exception in a controller, outside a function</a>    </p>
</li></ul></li><li class=" ">    <p>
<a class="document-link " href="#!/guide/Arrow_Cloud_Troubleshooting-section-43299774_ArrowCloudTroubleshooting-Exceptionsthrownatruntime">Exceptions thrown at runtime</a>    </p>
<ul class=" "><li class=" ">    <p>
<a class="document-link " href="#!/guide/Arrow_Cloud_Troubleshooting-section-43299774_ArrowCloudTroubleshooting-Exceptioninsynchronouscallshandlingrequests">Exception in synchronous calls handling requests</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/Arrow_Cloud_Troubleshooting-section-43299774_ArrowCloudTroubleshooting-Exceptioninasynchronouscallbackshandlingrequests(orbackgroundjobs)">Exception in asynchronous callbacks handling requests (or background jobs)</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/Arrow_Cloud_Troubleshooting-section-43299774_ArrowCloudTroubleshooting-Applicationcrasheswhilehandlingrequests">Application crashes while handling requests</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/Arrow_Cloud_Troubleshooting-section-43299774_ArrowCloudTroubleshooting-Applicationcrasheswhilerunningbackgroundjobs">Application crashes while running background jobs</a>    </p>
</li></ul></li><li class=" ">    <p>
<a class="document-link " href="#!/guide/Arrow_Cloud_Troubleshooting-section-43299774_ArrowCloudTroubleshooting-Installationerrors">Installation errors</a>    </p>
<ul class=" "><li class=" ">    <p>
<a class="document-link " href="#!/guide/Arrow_Cloud_Troubleshooting-section-43299774_ArrowCloudTroubleshooting-Error:ENOENT,nosuchfileordirectory">Error: ENOENT, no such file or directory</a>    </p>
</li></ul></li></ul>    <p>
This document summarizes the kinds of exceptions you may encounter when deploying or running a Arrow Cloud application, or when installing or upgrading the <tt class=" ">acs</tt> NPM package on your system.    </p>
    <p>
The <tt class=" ">appc cloud list</tt> and <tt class=" ">appc cloud loglist</tt> CLI commands are used to troubleshoot deployment or runtime issues. Note that <tt class=" ">appc cloud loglist</tt> may not immediately retrieve the latest logs from the server; you may need to wait a few seconds and try running the command again.    </p>
    <div class="section section-2 " id="43299774_ArrowCloudTroubleshooting-Exceptionsthrownupondeployment">
        <h2 class="heading "><span>Exceptions thrown upon deployment</span></h2>
    <div class="section section-3 " id="43299774_ArrowCloudTroubleshooting-Exceptioninapp.jsoutsidestart()method">
        <h3 class="heading "><span>Exception in app.js outside start() method</span></h3>
    <p>
The following code references an undefined variable outside application's <tt class=" ">start()</tt> method.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="comments">// initialize app</code></div>
<div class="line"><code class="plain">function start(app, express) {</code></div>
<div class="line"><code class="plain">    app.use(express.favicon(__dirname + </code><code class="string">'/public/images/favicon.ico'</code><code class="plain">));     </code><code class="comments">//set favicon</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="plain">adsgasdg;   </code><code class="comments">// This line causes exception.</code></div>
<div class="line"><code class="comments">// release resources</code></div>
<div class="line"><code class="plain">function stop() {</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div>    <p>
In this scenario the <strong class=" ">Message</strong> field of <tt class=" ">appc cloud list</tt> and <tt class=" ">appc acs loglist</tt> output indicates a <tt class=" ">ReferenceError</tt> and the name and location of the reference. The <strong class=" ">Status</strong> field of the <tt class=" ">appc cloud list</tt> command is set to <strong class=" ">&quot;Failed to deploy&quot;</strong>.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">$ appc cloud list testapp</code></div>
<div class="line"><code class="plain">App name: testapp</code></div>
<div class="line"><code class="plain">-- URL: http:</code><code class="comments">//a3110b813195ca3a774913a767e49a1ce5f17e63.cloud-services.appcelerator.com</code></div>
<div class="line"><code class="plain">-- Created at: Tue Dec </code><code class="value">24</code><code class="plain"> </code><code class="value">2013</code><code class="plain"> </code><code class="value">21</code><code class="plain">:</code><code class="value">15</code><code class="plain">:</code><code class="value">19</code><code class="plain"> GMT+</code><code class="value">0800</code><code class="plain"> (CST)</code></div>
<div class="line"><code class="plain">-- Node Version: </code><code class="value">0.10</code><code class="plain">.</code><code class="value">22</code></div>
<div class="line"><code class="plain">-- Maximum allowed number of servers: </code><code class="value">1</code></div>
<div class="line"><code class="plain">-- Desired number of servers: </code><code class="value">1</code></div>
<div class="line"><code class="plain">-- Active version: </code><code class="value">0.1</code><code class="plain">.</code><code class="value">0</code></div>
<div class="line"><code class="plain">-- Published at: Thu Dec </code><code class="value">26</code><code class="plain"> </code><code class="value">2013</code><code class="plain"> </code><code class="value">09</code><code class="plain">:</code><code class="value">18</code><code class="plain">:</code><code class="value">26</code><code class="plain"> GMT+</code><code class="value">0800</code><code class="plain"> (CST)</code></div>
<div class="line"><code class="plain">-- Status: Failed to deploy</code></div>
<div class="line"><code class="plain">-- Message: ReferenceError: adsgasdg is not defined at /app.js:</code><code class="value">6</code><code class="plain">:</code><code class="value">1</code></div>
<div class="line"><code class="plain">$ acs loglist testapp</code></div>
<div class="line"><code class="value">12</code><code class="plain">/</code><code class="value">26</code><code class="plain">/</code><code class="value">2013</code><code class="plain"> </code><code class="value">05</code><code class="plain">:</code><code class="value">18</code><code class="plain">:</code><code class="value">030.335</code><code class="plain"> [INFO] [</code><code class="value">4454</code><code class="plain">] ------------ Run MVC App ------------</code></div>
<div class="line"><code class="value">12</code><code class="plain">/</code><code class="value">26</code><code class="plain">/</code><code class="value">2013</code><code class="plain"> </code><code class="value">05</code><code class="plain">:</code><code class="value">18</code><code class="plain">:</code><code class="value">030.635</code><code class="plain"> [ERROR] [</code><code class="value">4454</code><code class="plain">] Failed to load main script. ReferenceError: adsgasdg is not defined</code></div>
<div class="line"><code class="plain">at /app.js:</code><code class="value">6</code><code class="plain">:</code><code class="value">1</code></div>
<div class="line"><code class="value">12</code><code class="plain">/</code><code class="value">26</code><code class="plain">/</code><code class="value">2013</code><code class="plain"> </code><code class="value">05</code><code class="plain">:</code><code class="value">18</code><code class="plain">:</code><code class="value">030.636</code><code class="plain"> [ERROR] [</code><code class="value">4454</code><code class="plain">] ReferenceError: adsgasdg is not defined</code></div>
<div class="line"><code class="plain">at /app.js:</code><code class="value">6</code><code class="plain">:</code><code class="value">1</code></div>
</div>
</div>    </div>
    <div class="section section-3 " id="43299774_ArrowCloudTroubleshooting-Exceptioninsideapp.jsstart()method">
        <h3 class="heading "><span>Exception inside app.js start() method</span></h3>
    <p>
The following code references an undefined variable inside application's <tt class=" ">start()</tt> method.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="comments">// initialize app</code></div>
<div class="line"><code class="plain">function start(app, express) {</code></div>
<div class="line"><code class="plain">    adsgasdg;   </code><code class="comments">// This line causes exception.</code></div>
<div class="line"><code class="plain">    app.use(express.favicon(__dirname + </code><code class="string">'/public/images/favicon.ico'</code><code class="plain">));     </code><code class="comments">//set favicon</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="comments">// release resources</code></div>
<div class="line"><code class="plain">function stop() {</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div>    <p>
    </p>
    <p>
In this scenario the <strong class=" ">Message</strong> field of <tt class=" ">appc cloud list</tt> and <tt class=" ">appc cloud loglist</tt> output indicates a <tt class=" ">ReferenceError</tt> and the name and location of the exception. The <strong class=" ">Status</strong> field of the <tt class=" ">appc cloud list</tt> command is set to <strong class=" ">&quot;Failed to deploy&quot;</strong>.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">$ appc acs list testapp</code></div>
<div class="line"><code class="plain">App name: testapp</code></div>
<div class="line"><code class="plain">-- URL: http:</code><code class="comments">//a3110b813195ca3a774913a767e49a1ce5f17e63.cloud-services.appcelerator.com</code></div>
<div class="line"><code class="plain">-- Created at: Tue Dec </code><code class="value">24</code><code class="plain"> </code><code class="value">2013</code><code class="plain"> </code><code class="value">21</code><code class="plain">:</code><code class="value">15</code><code class="plain">:</code><code class="value">19</code><code class="plain"> GMT+</code><code class="value">0800</code><code class="plain"> (CST)</code></div>
<div class="line"><code class="plain">-- Node Version: </code><code class="value">0.10</code><code class="plain">.</code><code class="value">22</code></div>
<div class="line"><code class="plain">-- Maximum allowed number of servers: </code><code class="value">1</code></div>
<div class="line"><code class="plain">-- Desired number of servers: </code><code class="value">1</code></div>
<div class="line"><code class="plain">-- Active version: </code><code class="value">0.1</code><code class="plain">.</code><code class="value">0</code></div>
<div class="line"><code class="plain">-- Published at: Thu Dec </code><code class="value">26</code><code class="plain"> </code><code class="value">2013</code><code class="plain"> </code><code class="value">09</code><code class="plain">:</code><code class="value">20</code><code class="plain">:</code><code class="value">40</code><code class="plain"> GMT+</code><code class="value">0800</code><code class="plain"> (CST)</code></div>
<div class="line"><code class="plain">-- Status: Failed to deploy</code></div>
<div class="line"><code class="plain">-- Message: ReferenceError: adsgasdg is not defined</code></div>
<div class="line"><code class="plain">at Object.start (/app.js:</code><code class="value">4</code><code class="plain">:</code><code class="value">5</code><code class="plain">)</code></div>
<div class="line"><code class="plain">$ acs loglist testapp</code></div>
<div class="line"><code class="value">12</code><code class="plain">/</code><code class="value">26</code><code class="plain">/</code><code class="value">2013</code><code class="plain"> </code><code class="value">05</code><code class="plain">:</code><code class="value">20</code><code class="plain">:</code><code class="value">043.923</code><code class="plain"> [INFO] [</code><code class="value">4488</code><code class="plain">] ------------ Run MVC App ------------</code></div>
<div class="line"><code class="plain">info: socket.io started</code></div>
<div class="line"><code class="value">12</code><code class="plain">/</code><code class="value">26</code><code class="plain">/</code><code class="value">2013</code><code class="plain"> </code><code class="value">05</code><code class="plain">:</code><code class="value">20</code><code class="plain">:</code><code class="value">044.224</code><code class="plain"> [ERROR] [</code><code class="value">4488</code><code class="plain">] Failed to run start(). ReferenceError: adsgasdg is not defined</code></div>
<div class="line"><code class="plain">at Object.start (/app.js:</code><code class="value">4</code><code class="plain">:</code><code class="value">5</code><code class="plain">)</code></div>
<div class="line"><code class="value">12</code><code class="plain">/</code><code class="value">26</code><code class="plain">/</code><code class="value">2013</code><code class="plain"> </code><code class="value">05</code><code class="plain">:</code><code class="value">20</code><code class="plain">:</code><code class="value">044.225</code><code class="plain"> [ERROR] [</code><code class="value">4488</code><code class="plain">] ReferenceError: adsgasdg is not defined</code></div>
<div class="line"><code class="plain">at Object.start (/app.js:</code><code class="value">4</code><code class="plain">:</code><code class="value">5</code><code class="plain">)</code></div>
</div>
</div>    </div>
    <div class="section section-3 " id="43299774_ArrowCloudTroubleshooting-Exceptioninacontroller,outsideafunction">
        <h3 class="heading "><span>Exception in a controller, outside a function</span></h3>
    <p>
The following code references an undefined variable inside a controller, outside any function definition:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">function index(req, res) {</code></div>
<div class="line"><code class="plain">    res.render(</code><code class="string">'index'</code><code class="plain">, { title: </code><code class="string">'Welcome to Node.ACS! '</code><code class="plain"> + process.version });</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="plain">asgasg;dkg;as   </code><code class="comments">// This line causes exception.</code></div>
</div>
</div>    <p>
When accessing the application and hitting the controller over HTTP, it returns the following error:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">Cannot get /</code></div>
</div>
</div>    <p>
In this scenario the <tt class=" ">appc cloud list</tt> output doesn't indicate a problem, but <tt class=" ">appc cloud loglist</tt> indicates a <tt class=" ">ReferenceError</tt> and the name and location of the exception.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">$ appc cloud list testapp</code></div>
<div class="line"><code class="plain">App name: testapp</code></div>
<div class="line"><code class="plain">-- URL: http:</code><code class="comments">//a3110b813195ca3a774913a767e49a1ce5f17e63.cloud-services.appcelerator.com</code></div>
<div class="line"><code class="plain">-- Created at: Tue Dec </code><code class="value">24</code><code class="plain"> </code><code class="value">2013</code><code class="plain"> </code><code class="value">21</code><code class="plain">:</code><code class="value">15</code><code class="plain">:</code><code class="value">19</code><code class="plain"> GMT+</code><code class="value">0800</code><code class="plain"> (CST)</code></div>
<div class="line"><code class="plain">-- Node Version: </code><code class="value">0.10</code><code class="plain">.</code><code class="value">22</code></div>
<div class="line"><code class="plain">-- Maximum allowed number of servers: </code><code class="value">1</code></div>
<div class="line"><code class="plain">-- Desired number of servers: </code><code class="value">1</code></div>
<div class="line"><code class="plain">-- Current number of deployed servers: </code><code class="value">1</code></div>
<div class="line"><code class="plain">-- Active version: </code><code class="value">0.1</code><code class="plain">.</code><code class="value">0</code></div>
<div class="line"><code class="plain">-- Published at: Thu Dec </code><code class="value">26</code><code class="plain"> </code><code class="value">2013</code><code class="plain"> </code><code class="value">09</code><code class="plain">:</code><code class="value">24</code><code class="plain">:</code><code class="value">54</code><code class="plain"> GMT+</code><code class="value">0800</code><code class="plain"> (CST)</code></div>
<div class="line"><code class="plain">-- Servers: </code></div>
<div class="line"><code class="plain">No. </code><code class="value">1</code><code class="plain"> ID: 52b81468754c4184e58e8789 Status: Deployed</code></div>
<div class="line"><code class="plain">$ acs loglist testapp </code></div>
<div class="line"><code class="value">12</code><code class="plain">/</code><code class="value">26</code><code class="plain">/</code><code class="value">2013</code><code class="plain"> </code><code class="value">05</code><code class="plain">:</code><code class="value">24</code><code class="plain">:</code><code class="value">059.035</code><code class="plain"> [INFO] [</code><code class="value">4503</code><code class="plain">] ------------ Run MVC App ------------</code></div>
<div class="line"><code class="plain">info: socket.io started</code></div>
<div class="line"><code class="value">12</code><code class="plain">/</code><code class="value">26</code><code class="plain">/</code><code class="value">2013</code><code class="plain"> </code><code class="value">05</code><code class="plain">:</code><code class="value">24</code><code class="plain">:</code><code class="value">059.427</code><code class="plain"> [ERROR] [</code><code class="value">4503</code><code class="plain">] Failed to load controller </code><code class="string">"application.js"</code><code class="plain">. </code></div>
<div class="line"><code class="plain">    ReferenceError: asgasg is not defined at /controllers/application.js:</code><code class="value">5</code><code class="plain">:</code><code class="value">1</code></div>
</div>
</div>    </div>
    </div>
    <div class="section section-2 " id="43299774_ArrowCloudTroubleshooting-Exceptionsthrownatruntime">
        <h2 class="heading "><span>Exceptions thrown at runtime</span></h2>
    <div class="section section-3 " id="43299774_ArrowCloudTroubleshooting-Exceptioninsynchronouscallshandlingrequests">
        <h3 class="heading "><span>Exception in synchronous calls handling requests</span></h3>
    <p>
The following code references an undefined variable inside a controller function.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">function index(req, res) {</code></div>
<div class="line"><code class="plain">   asgasg;dkg;as    </code><code class="comments">// This line causes exception.</code></div>
<div class="line"><code class="plain">   res.render(</code><code class="string">'index'</code><code class="plain">, { title: </code><code class="string">'Welcome to Arrow Cloud! '</code><code class="plain"> + process.version });</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div>    <p>
In this scenario the <tt class=" ">appc cloud list</tt> output doesn't indicate a problem, but <tt class=" ">appc cloud loglist</tt> indicates a <tt class=" ">ReferenceError</tt> and the name and location of the exception.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">$ appc cloud list testapp</code></div>
<div class="line"><code class="plain">App name: testapp</code></div>
<div class="line"><code class="plain">-- URL: http:</code><code class="comments">//a3110b813195ca3a774913a767e49a1ce5f17e63.cloud-services.appcelerator.com</code></div>
<div class="line"><code class="plain">-- Created at: Tue Dec </code><code class="value">24</code><code class="plain"> </code><code class="value">2013</code><code class="plain"> </code><code class="value">21</code><code class="plain">:</code><code class="value">15</code><code class="plain">:</code><code class="value">19</code><code class="plain"> GMT+</code><code class="value">0800</code><code class="plain"> (CST)</code></div>
<div class="line"><code class="plain">-- Node Version: </code><code class="value">0.10</code><code class="plain">.</code><code class="value">22</code></div>
<div class="line"><code class="plain">-- Maximum allowed number of servers: </code><code class="value">1</code></div>
<div class="line"><code class="plain">-- Desired number of servers: </code><code class="value">1</code></div>
<div class="line"><code class="plain">-- Current number of deployed servers: </code><code class="value">1</code></div>
<div class="line"><code class="plain">-- Active version: </code><code class="value">0.1</code><code class="plain">.</code><code class="value">0</code></div>
<div class="line"><code class="plain">-- Published at: Thu Dec </code><code class="value">26</code><code class="plain"> </code><code class="value">2013</code><code class="plain"> </code><code class="value">09</code><code class="plain">:</code><code class="value">29</code><code class="plain">:</code><code class="value">52</code><code class="plain"> GMT+</code><code class="value">0800</code><code class="plain"> (CST)</code></div>
<div class="line"><code class="plain">-- Servers: </code></div>
<div class="line"><code class="plain">No. </code><code class="value">1</code><code class="plain"> ID: 52b81468754c4184e58e8789 Status: Deployed</code></div>
<div class="line"><code class="plain">$ acs loglist testapp</code></div>
<div class="line"><code class="value">12</code><code class="plain">/</code><code class="value">26</code><code class="plain">/</code><code class="value">2013</code><code class="plain"> </code><code class="value">05</code><code class="plain">:</code><code class="value">33</code><code class="plain">:</code><code class="value">003.721</code><code class="plain"> [INFO] [</code><code class="value">4541</code><code class="plain">] ------------ Run MVC App ------------</code></div>
<div class="line"><code class="plain">info: socket.io started</code></div>
<div class="line"><code class="value">12</code><code class="plain">/</code><code class="value">26</code><code class="plain">/</code><code class="value">2013</code><code class="plain"> </code><code class="value">05</code><code class="plain">:</code><code class="value">33</code><code class="plain">:</code><code class="value">004.122</code><code class="plain"> [INFO] [</code><code class="value">4541</code><code class="plain">] App started</code></div>
<div class="line"><code class="plain">ReferenceError: asgasg is not defined at index (/controllers/application.js:</code><code class="value">3</code><code class="plain">:</code><code class="value">5</code><code class="plain">)</code></div>
<div class="line"><code class="plain">[PERF] GET / </code><code class="value">9</code><code class="plain"> ms</code></div>
</div>
</div>    <p>
The response when accessing the application and hitting that function indicates the name and location of the reference error:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">ReferenceError: asgasg is not defined</code></div>
<div class="line"><code class="plain">    at index (/controllers/application.js:</code><code class="value">2</code><code class="plain">:</code><code class="value">4</code><code class="plain">)</code></div>
</div>
</div>    </div>
    <div class="section section-3 " id="43299774_ArrowCloudTroubleshooting-Exceptioninasynchronouscallbackshandlingrequests(orbackgroundjobs)">
        <h3 class="heading "><span>Exception in asynchronous callbacks handling requests (or background jobs)</span></h3>
    <p>
The following code sample uses the <tt class=" ">setTimeout()</tt> method to asynchronously call a function that contains an exception.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">function index(req, res) {</code></div>
<div class="line"><code class="plain">    setTimeout(function(){</code></div>
<div class="line"><code class="plain">        respond(res);</code></div>
<div class="line"><code class="plain">    }, </code><code class="value">2000</code><code class="plain">);</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="plain">function respond(res) {</code></div>
<div class="line"><code class="plain">    asgasg;af   </code><code class="comments">//This line causes exception.</code></div>
<div class="line"><code class="plain">    res.render(</code><code class="string">'index'</code><code class="plain">, { title: </code><code class="string">'Welcome to Node.ACS! '</code><code class="plain"> + process.version });</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div>    <p class="prettyprint prettyprinted">
In this scenario when accessing the application over HTTP and hitting the function, the following error is returned:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">An error has occurred: {</code><code class="string">"code"</code><code class="plain">:</code><code class="string">"ECONNRESET"</code><code class="plain">}</code></div>
</div>
</div>    <p>
In this scenario <tt class=" ">appc cloud loglist</tt> indicates a <tt class=" ">ReferenceError</tt> and the corresponding stack trace; <tt class=" ">appc cloud list</tt> does not indicate any problem.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">$ appc cloud loglist testapp</code></div>
<div class="line"><code class="value">12</code><code class="plain">/</code><code class="value">26</code><code class="plain">/</code><code class="value">2013</code><code class="plain"> </code><code class="value">05</code><code class="plain">:</code><code class="value">44</code><code class="plain">:</code><code class="value">043.639</code><code class="plain"> [INFO] [</code><code class="value">4606</code><code class="plain">] ------------ Run MVC App ------------</code></div>
<div class="line"><code class="plain">info: socket.io started</code></div>
<div class="line"><code class="value">12</code><code class="plain">/</code><code class="value">26</code><code class="plain">/</code><code class="value">2013</code><code class="plain"> </code><code class="value">05</code><code class="plain">:</code><code class="value">44</code><code class="plain">:</code><code class="value">044.054</code><code class="plain"> [INFO] [</code><code class="value">4606</code><code class="plain">] App started</code></div>
<div class="line"><code class="value">12</code><code class="plain">/</code><code class="value">26</code><code class="plain">/</code><code class="value">2013</code><code class="plain"> </code><code class="value">05</code><code class="plain">:</code><code class="value">44</code><code class="plain">:</code><code class="value">053.999</code><code class="plain"> [ERROR] [</code><code class="value">4606</code><code class="plain">] ReferenceError: asgasg is not defined</code></div>
<div class="line"><code class="plain">at respond (/controllers/application.js:</code><code class="value">8</code><code class="plain">:</code><code class="value">5</code><code class="plain">)</code></div>
<div class="line"><code class="plain">at </code><code class="keyword">null</code><code class="plain">._onTimeout (/controllers/application.js:</code><code class="value">3</code><code class="plain">:</code><code class="value">9</code><code class="plain">)</code></div>
<div class="line"><code class="plain">at Timer.listOnTimeout [as ontimeout] (timers.js:</code><code class="value">110</code><code class="plain">:</code><code class="value">15</code><code class="plain">)</code></div>
<div class="line"><code class="value">12</code><code class="plain">/</code><code class="value">26</code><code class="plain">/</code><code class="value">2013</code><code class="plain"> </code><code class="value">05</code><code class="plain">:</code><code class="value">44</code><code class="plain">:</code><code class="value">059.627</code><code class="plain"> [INFO] [</code><code class="value">4614</code><code class="plain">] ------------ Run MVC App ------------</code></div>
<div class="line"><code class="plain">info: socket.io started</code></div>
<div class="line"><code class="value">12</code><code class="plain">/</code><code class="value">26</code><code class="plain">/</code><code class="value">2013</code><code class="plain"> </code><code class="value">05</code><code class="plain">:</code><code class="value">45</code><code class="plain">:</code><code class="value">000.029</code><code class="plain"> [INFO] [</code><code class="value">4614</code><code class="plain">] App started</code></div>
<div class="line"><code class="plain">$ acs list testapp</code></div>
<div class="line"><code class="plain">App name: testapp</code></div>
<div class="line"><code class="plain">-- URL: http:</code><code class="comments">//a3110b813195ca3a774913a767e49a1ce5f17e63.cloud-services.appcelerator.com</code></div>
<div class="line"><code class="plain">-- Created at: Tue Dec </code><code class="value">24</code><code class="plain"> </code><code class="value">2013</code><code class="plain"> </code><code class="value">21</code><code class="plain">:</code><code class="value">15</code><code class="plain">:</code><code class="value">19</code><code class="plain"> GMT+</code><code class="value">0800</code><code class="plain"> (CST)</code></div>
<div class="line"><code class="plain">-- Node Version: </code><code class="value">0.10</code><code class="plain">.</code><code class="value">22</code></div>
<div class="line"><code class="plain">-- Maximum allowed number of servers: </code><code class="value">1</code></div>
<div class="line"><code class="plain">-- Desired number of servers: </code><code class="value">1</code></div>
<div class="line"><code class="plain">-- Current number of deployed servers: </code><code class="value">1</code></div>
<div class="line"><code class="plain">-- Active version: </code><code class="value">0.1</code><code class="plain">.</code><code class="value">0</code></div>
<div class="line"><code class="plain">-- Published at: Thu Dec </code><code class="value">26</code><code class="plain"> </code><code class="value">2013</code><code class="plain"> </code><code class="value">09</code><code class="plain">:</code><code class="value">29</code><code class="plain">:</code><code class="value">52</code><code class="plain"> GMT+</code><code class="value">0800</code><code class="plain"> (CST)</code></div>
<div class="line"><code class="plain">-- Servers: </code></div>
<div class="line"><code class="plain">No. </code><code class="value">1</code><code class="plain"> ID: 52b81468754c4184e58e8789 Status: Deployed</code></div>
</div>
</div>    </div>
    <div class="section section-3 " id="43299774_ArrowCloudTroubleshooting-Applicationcrasheswhilehandlingrequests">
        <h3 class="heading "><span>Application crashes while handling requests</span></h3>
    <p>
The following code has request handler that quickly uses up available memory, causing the application to crash.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">function index(req, res) {</code></div>
<div class="line"><code class="plain">    respond(res);</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="plain">function respond(res) {</code></div>
<div class="line"><code class="plain">    var cur = </code><code class="value">167772160</code><code class="plain">;</code></div>
<div class="line"><code class="plain">    var bcast = </code><code class="value">184549375</code><code class="plain">;</code></div>
<div class="line"><code class="plain">    var addresses = [];</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">while</code><code class="plain"> (cur &lt;= bcast){</code></div>
<div class="line"><code class="plain">        cur += </code><code class="value">1</code><code class="plain">;</code></div>
<div class="line"><code class="plain">        addresses.push(cur);</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain">    console.log(addresses.length);</code></div>
<div class="line"><code class="plain">    console.log(addresses); </code><code class="comments">// memory goes from a few megs to over a gig in seconds when trying to print this</code></div>
<div class="line"><code class="plain">    res.send(addresses);</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div>    <p>
The <tt class=" ">appc cloud loglist</tt> output indicates &quot;FATAL ERROR: JS Allocation failed - process out of memory&quot;; <tt class=" ">appc cloud list</tt> doesn't indicate any problem.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">$ acs loglist testapp</code></div>
<div class="line"><code class="value">12</code><code class="plain">/</code><code class="value">26</code><code class="plain">/</code><code class="value">2013</code><code class="plain"> </code><code class="value">05</code><code class="plain">:</code><code class="value">58</code><code class="plain">:</code><code class="value">042.432</code><code class="plain"> [INFO] [</code><code class="value">4628</code><code class="plain">] ------------ Run MVC App ------------</code></div>
<div class="line"><code class="plain">info: socket.io started</code></div>
<div class="line"><code class="value">12</code><code class="plain">/</code><code class="value">26</code><code class="plain">/</code><code class="value">2013</code><code class="plain"> </code><code class="value">05</code><code class="plain">:</code><code class="value">58</code><code class="plain">:</code><code class="value">042.828</code><code class="plain"> [INFO] [</code><code class="value">4628</code><code class="plain">] App started</code></div>
<div class="line"><code class="plain">FATAL ERROR: JS Allocation failed - process out of memory</code></div>
<div class="line"><code class="value">12</code><code class="plain">/</code><code class="value">26</code><code class="plain">/</code><code class="value">2013</code><code class="plain"> </code><code class="value">05</code><code class="plain">:</code><code class="value">59</code><code class="plain">:</code><code class="value">000.030</code><code class="plain"> [INFO] [</code><code class="value">4636</code><code class="plain">] ------------ Run MVC App ------------</code></div>
<div class="line"><code class="plain">info: socket.io started</code></div>
<div class="line"><code class="value">12</code><code class="plain">/</code><code class="value">26</code><code class="plain">/</code><code class="value">2013</code><code class="plain"> </code><code class="value">05</code><code class="plain">:</code><code class="value">59</code><code class="plain">:</code><code class="value">000.434</code><code class="plain"> [INFO] [</code><code class="value">4636</code><code class="plain">] App started</code></div>
<div class="line"><code class="plain">$ acs list testapp</code></div>
<div class="line"><code class="plain">App name: testapp</code></div>
<div class="line"><code class="plain">-- URL: http:</code><code class="comments">//a3110b813195ca3a774913a767e49a1ce5f17e63.cloud-services.appcelerator.com</code></div>
<div class="line"><code class="plain">-- Created at: Tue Dec </code><code class="value">24</code><code class="plain"> </code><code class="value">2013</code><code class="plain"> </code><code class="value">21</code><code class="plain">:</code><code class="value">15</code><code class="plain">:</code><code class="value">19</code><code class="plain"> GMT+</code><code class="value">0800</code><code class="plain"> (CST)</code></div>
<div class="line"><code class="plain">-- Node Version: </code><code class="value">0.10</code><code class="plain">.</code><code class="value">22</code></div>
<div class="line"><code class="plain">-- Maximum allowed number of servers: </code><code class="value">1</code></div>
<div class="line"><code class="plain">-- Desired number of servers: </code><code class="value">1</code></div>
<div class="line"><code class="plain">-- Current number of deployed servers: </code><code class="value">1</code></div>
<div class="line"><code class="plain">-- Active version: </code><code class="value">0.1</code><code class="plain">.</code><code class="value">0</code></div>
<div class="line"><code class="plain">-- Published at: Thu Dec </code><code class="value">26</code><code class="plain"> </code><code class="value">2013</code><code class="plain"> </code><code class="value">09</code><code class="plain">:</code><code class="value">29</code><code class="plain">:</code><code class="value">52</code><code class="plain"> GMT+</code><code class="value">0800</code><code class="plain"> (CST)</code></div>
<div class="line"><code class="plain">-- Servers: </code></div>
<div class="line"><code class="plain">No. </code><code class="value">1</code><code class="plain"> ID: 52b81468754c4184e58e8789 Status: Deployed</code></div>
</div>
</div>    </div>
    <div class="section section-3 " id="43299774_ArrowCloudTroubleshooting-Applicationcrasheswhilerunningbackgroundjobs">
        <h3 class="heading "><span>Application crashes while running background jobs</span></h3>
    <p>
The following code causes the application to run out of memory and crash while processing a <tt class=" ">setTimeout()</tt> function call.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="comments">// initialize app</code></div>
<div class="line"><code class="plain">function start(app, express) {</code></div>
<div class="line"><code class="plain">    app.use(express.favicon(__dirname + </code><code class="string">'/public/images/favicon.ico'</code><code class="plain">));     </code><code class="comments">//set favicon</code></div>
<div class="line"><code class="plain">    setTimeout(dosth, </code><code class="value">5000</code><code class="plain">);</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="comments">// release resources</code></div>
<div class="line"><code class="plain">function stop() {</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="plain">function dosth() {</code></div>
<div class="line"><code class="plain">    var cur = </code><code class="value">167772160</code><code class="plain">;</code></div>
<div class="line"><code class="plain">    var bcast = </code><code class="value">184549375</code><code class="plain">;</code></div>
<div class="line"><code class="plain">    var addresses = [];</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">while</code><code class="plain"> (cur &lt;= bcast){</code></div>
<div class="line"><code class="plain">        cur += </code><code class="value">1</code><code class="plain">;</code></div>
<div class="line"><code class="plain">        addresses.push(cur);</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain">    console.log(addresses.length);</code></div>
<div class="line"><code class="plain">    console.log(addresses); </code><code class="comments">// memory goes from a few megs to over a gig in seconds when trying to print this</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div>    <p>
The <tt class=" ">appc cloud loglist</tt> output indicates &quot;FATAL ERROR: JS Allocation failed - process out of memory&quot;; <tt class=" ">appc cloud list</tt> doesn't indicate any problem.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">$ appc cloud loglist testapp</code></div>
<div class="line"><code class="value">12</code><code class="plain">/</code><code class="value">26</code><code class="plain">/</code><code class="value">2013</code><code class="plain"> </code><code class="value">06</code><code class="plain">:</code><code class="value">04</code><code class="plain">:</code><code class="value">043.934</code><code class="plain"> [INFO] [</code><code class="value">4667</code><code class="plain">] ------------ Run MVC App ------------</code></div>
<div class="line"><code class="plain">info: socket.io started</code></div>
<div class="line"><code class="value">12</code><code class="plain">/</code><code class="value">26</code><code class="plain">/</code><code class="value">2013</code><code class="plain"> </code><code class="value">06</code><code class="plain">:</code><code class="value">04</code><code class="plain">:</code><code class="value">044.332</code><code class="plain"> [INFO] [</code><code class="value">4667</code><code class="plain">] App started</code></div>
<div class="line"><code class="plain">FATAL ERROR: JS Allocation failed - process out of memory</code></div>
<div class="line"><code class="value">12</code><code class="plain">/</code><code class="value">26</code><code class="plain">/</code><code class="value">2013</code><code class="plain"> </code><code class="value">06</code><code class="plain">:</code><code class="value">05</code><code class="plain">:</code><code class="value">000.529</code><code class="plain"> [INFO] [</code><code class="value">4671</code><code class="plain">] ------------ Run MVC App ------------</code></div>
<div class="line"><code class="plain">info: socket.io started</code></div>
<div class="line"><code class="value">12</code><code class="plain">/</code><code class="value">26</code><code class="plain">/</code><code class="value">2013</code><code class="plain"> </code><code class="value">06</code><code class="plain">:</code><code class="value">05</code><code class="plain">:</code><code class="value">000.927</code><code class="plain"> [INFO] [</code><code class="value">4671</code><code class="plain">] App started</code></div>
<div class="line"><code class="plain">FATAL ERROR: JS Allocation failed - process out of memory</code></div>
<div class="line"><code class="plain">$ acs list testapp</code></div>
<div class="line"><code class="plain">App name: testapp</code></div>
<div class="line"><code class="plain">-- URL: http:</code><code class="comments">//a3110b813195ca3a774913a767e49a1ce5f17e63.cloud-services.appcelerator.com</code></div>
<div class="line"><code class="plain">-- Created at: Tue Dec </code><code class="value">24</code><code class="plain"> </code><code class="value">2013</code><code class="plain"> </code><code class="value">21</code><code class="plain">:</code><code class="value">15</code><code class="plain">:</code><code class="value">19</code><code class="plain"> GMT+</code><code class="value">0800</code><code class="plain"> (CST)</code></div>
<div class="line"><code class="plain">-- Node Version: </code><code class="value">0.10</code><code class="plain">.</code><code class="value">22</code></div>
<div class="line"><code class="plain">-- Maximum allowed number of servers: </code><code class="value">1</code></div>
<div class="line"><code class="plain">-- Desired number of servers: </code><code class="value">1</code></div>
<div class="line"><code class="plain">-- Current number of deployed servers: </code><code class="value">1</code></div>
<div class="line"><code class="plain">-- Active version: </code><code class="value">0.1</code><code class="plain">.</code><code class="value">0</code></div>
<div class="line"><code class="plain">-- Published at: Thu Dec </code><code class="value">26</code><code class="plain"> </code><code class="value">2013</code><code class="plain"> </code><code class="value">09</code><code class="plain">:</code><code class="value">29</code><code class="plain">:</code><code class="value">52</code><code class="plain"> GMT+</code><code class="value">0800</code><code class="plain"> (CST)</code></div>
<div class="line"><code class="plain">-- Servers: </code></div>
<div class="line"><code class="plain">No. </code><code class="value">1</code><code class="plain"> ID: 52b81468754c4184e58e8789 Status: Deployed  </code></div>
</div>
</div>    </div>
    </div>
    <div class="section section-2 " id="43299774_ArrowCloudTroubleshooting-Installationerrors">
        <h2 class="heading "><span>Installation errors</span></h2>
    <p>
This section describes issues you may encounter when installing or upgrading Arrow Cloud using NPM.    </p>
    <div class="section section-3 " id="43299774_ArrowCloudTroubleshooting-Error:ENOENT,nosuchfileordirectory">
        <h3 class="heading "><span>Error: ENOENT, no such file or directory</span></h3>
    <p>
Arrow Cloud installation fails with the following error:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">...</code></div>
<div class="line"><code class="plain">fs.js:</code><code class="value">427</code></div>
<div class="line"><code class="plain">  </code><code class="keyword">return</code><code class="plain"> binding.open(pathModule._makeLong(path), stringToFlags(flags), mode);</code></div>
<div class="line"><code class="plain">                 ^</code></div>
<div class="line"><code class="plain">Error: ENOENT, no such file or directory </code><code class="string">'/usr/local/lib/node_modules/acs/bin/acsx'</code></div>
<div class="line"><code class="plain">    at Object.fs.openSync (fs.js:</code><code class="value">427</code><code class="plain">:</code><code class="value">18</code><code class="plain">)</code></div>
<div class="line"><code class="plain">    at Object.fs.readFileSync (fs.js:</code><code class="value">284</code><code class="plain">:</code><code class="value">15</code><code class="plain">)</code></div>
<div class="line"><code class="plain">    at Object.&lt;anonymous&gt; (/usr/local/lib/node_modules/acs/scripts/config.js:</code><code class="value">21</code><code class="plain">:</code><code class="value">19</code><code class="plain">)</code></div>
<div class="line"><code class="plain">    at Module._compile (module.js:</code><code class="value">456</code><code class="plain">:</code><code class="value">26</code><code class="plain">)</code></div>
<div class="line"><code class="plain">    at Object.Module._extensions..js (module.js:</code><code class="value">474</code><code class="plain">:</code><code class="value">10</code><code class="plain">)</code></div>
<div class="line"><code class="plain">    at Module.load (module.js:</code><code class="value">356</code><code class="plain">:</code><code class="value">32</code><code class="plain">)</code></div>
<div class="line"><code class="plain">    at Function.Module._load (module.js:</code><code class="value">312</code><code class="plain">:</code><code class="value">12</code><code class="plain">)</code></div>
<div class="line"><code class="plain">    at Function.Module.runMain (module.js:</code><code class="value">497</code><code class="plain">:</code><code class="value">10</code><code class="plain">)</code></div>
<div class="line"><code class="plain">    at startup (node.js:</code><code class="value">119</code><code class="plain">:</code><code class="value">16</code><code class="plain">)</code></div>
<div class="line"><code class="plain">    at node.js:</code><code class="value">902</code><code class="plain">:</code><code class="value">3</code><code class="plain"> </code></div>
</div>
</div>    <p>
To resolve, try deleting your <tt class=" ">~/.npm</tt> folder and cleaning the NPM cache, then re-installing:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">rm -rf ~/.npm</code></div>
<div class="line"><code class="plain">npm cache clear</code></div>
<div class="line"><code class="plain">sudo npm -g install acs</code></div>
</div>
</div>    </div>
    </div>
        </div><a id="editButton" href="https://wiki.appcelerator.org/pages/editpage.action?pageId=43299774"><span>Edit</span></a>
    
        <div class="footer">
            Created with <a href="http://k15t.com/display/web/Scroll-Wiki-EclipseHelp-Exporter-for-Confluence" target="_blank">Scroll EclipseHelp Exporter for Confluence</a>.
        </div>
    </div>
</body>
</html>
