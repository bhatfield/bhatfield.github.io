<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Arrow Connector Project</title>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta content="Scroll EclipseHelp Exporter" name="generator"/>

    <link type="text/css" rel="stylesheet"/>
    <link type="text/css" rel="stylesheet"/>
    <link type="text/css" rel="stylesheet" media="print"/>
</head>
<body>
    <div class="container">
        <div class="header"/>

        <div id="43300774" class="content">
            <h1>Arrow Connector Project</h1>
    <p>
    </p>
    <div class="confbox admonition admonition-warning aui-message problem shadowed information-macro">
            <div class="title">Team Subscription Required!</div>
        
    <p>
This Appcelerator Platform feature requires a Team Subscription.    </p>
    </div>
    
<ul class="toc-indentation "><li class=" ">    <p>
<a class="document-link " href="#!/guide/Arrow_Connector_Project-section-43300774_ArrowConnectorProject-Introduction">Introduction</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/Arrow_Connector_Project-section-43300774_ArrowConnectorProject-ProjectStructure">Project Structure</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/Arrow_Connector_Project-section-43300774_ArrowConnectorProject-CLITasks">CLI Tasks</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p>
<a class="document-link " href="#!/guide/Arrow_Connector_Project-section-43300774_ArrowConnectorProject-CreateaConnector">Create a Connector</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/Arrow_Connector_Project-section-43300774_ArrowConnectorProject-TesttheConnector">Test the Connector</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/Arrow_Connector_Project-section-43300774_ArrowConnectorProject-PublishtheConnector">Publish the Connector</a>    </p>
</li></ul></li><li class=" ">    <p>
<a class="document-link " href="#!/guide/Arrow_Connector_Project-section-43300774_ArrowConnectorProject-ConnectorLogic">Connector Logic</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p>
<a class="document-link " href="#!/guide/Arrow_Connector_Project-section-43300774_ArrowConnectorProject-Initialization">Initialization</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/Arrow_Connector_Project-section-43300774_ArrowConnectorProject-ConnectionLifecycle">Connection Lifecycle</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/Arrow_Connector_Project-section-43300774_ArrowConnectorProject-CRUDMethods">CRUD Methods</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/Arrow_Connector_Project-section-43300774_ArrowConnectorProject-RequestLifecycle">Request Lifecycle</a>    </p>
</li></ul></li><li class=" ">    <p>
<a class="document-link " href="#!/guide/Arrow_Connector_Project-section-43300774_ArrowConnectorProject-ConnectorConfigurationFile">Connector Configuration File</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/Arrow_Connector_Project-section-43300774_ArrowConnectorProject-ModelsandAPIEndpoints">Models and API Endpoints</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/Arrow_Connector_Project-section-43300774_ArrowConnectorProject-DeclareDependencies">Declare Dependencies</a>    </p>
</li></ul>    <div class="section section-2 " id="43300774_ArrowConnectorProject-Introduction">
        <h2 class="heading "><span>Introduction</span></h2>
    <p>
An Arrow Connector project is similar in structure to an Arrow Builder project.  This guide covers how to manage your Arrow Connector project.    </p>
    <p>
To add a connector to your Arrow project, see <a class="document-link " href="#!/guide/Add_a_Connector">Add a Connector</a>.    </p>
    </div>
    <div class="section section-2 " id="43300774_ArrowConnectorProject-ProjectStructure">
        <h2 class="heading "><span>Project Structure</span></h2>
    <p>
An Arrow Connector project is made up of several components.  To simplify development, Arrow primarily uses a strict directory structure and naming convention to organize the application rather than configuration files.    </p>
    <p>
The following is a list of directories and files that can be found in an Arrow Connector project:    </p>
    <div class="tablewrap">
        <table class="confluenceTable">
        <thead class=" ">    <tr>
            <td class="confluenceTh" rowspan="1" colspan="1">
        <p>
File/Folder Name    </p>
            </td>
                <td class="confluenceTh" rowspan="1" colspan="1">
        <p>
Description    </p>
            </td>
        </tr>
</thead><tfoot class=" "/><tbody class=" ">    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
<tt class=" ">app.js</tt>    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
Entry point to the connector for testing, which launches a server instance.    </p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
<tt class=" ">appc.json</tt>    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
Project configuration file. Do not modify this file.    </p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
<tt class=" ">conf</tt>    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
Contains configuration files in JSON format for the connector. The <tt class=" ">default.js</tt> file is used for testing the connector. You can create an example configuration file, which is copied to the Arrow project when its installed. See <a class="document-link " href="#!/guide/Arrow_Connector_Project-section-43300774_ArrowConnectorProject-ConnectorConfigurationFile">Connector Configuration File</a> below.    </p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
<tt class=" ">index.js</tt>    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
Entry point to the connector.    </p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
<tt class=" ">lib</tt>    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
Contains the logic for your connector. Requires an <tt class=" ">index.js</tt> file. See <a class="document-link " href="#!/guide/Arrow_Connector_Project-section-43300774_ArrowConnectorProject-ConnectorLogic">Connector Logic</a> below.    </p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
<tt class=" ">logs</tt>    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
Contains generated log files when running your project locally. If you test the connector, the generated log files will get packaged with the application. You may want to disable logging by setting the <tt class=" ">transactionLogEnabled</tt> property to <tt class=" ">false</tt> in the<tt class=" "> conf/default.js</tt>.    </p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
<tt class=" ">models</tt>    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
Contains Arrow Model JavaScript files, used to declare the schema for your data and generate API endpoints for the connector. See <a class="document-link " href="#!/guide/Arrow_Connector_Project-section-43300774_ArrowConnectorProject-ModelsandAPIEndpoints">Models and API Endpoints</a> below.    </p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
<tt class=" ">node_modules</tt>    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
Contains project dependencies. Arrow automatically installs any project dependencies declared in the <tt class=" ">package.json</tt> file.    </p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
<tt class=" ">package.json</tt>    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
NPM configuration file to declare project dependencies and other build or runtime configurations.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-2 " id="43300774_ArrowConnectorProject-CLITasks">
        <h2 class="heading "><span>CLI Tasks</span></h2>
    <p>
Use the Appcelerator CLI to create, test and deploy your Connector project.    </p>
    <div class="section section-3 " id="43300774_ArrowConnectorProject-CreateaConnector">
        <h3 class="heading "><span>Create a Connector</span></h3>
    <p>
To create a new connector, from your workspace directory, execute the <tt class=" ">appc generate</tt> command.  When prompted:    </p>
<ul class=" "><li class=" ">    <p>
Select <strong class=" ">Arrow Component</strong> for the type of component    </p>
</li><li class=" ">    <p>
Select<strong class=" "> Arrow Connector</strong> for the Arrow component    </p>
</li><li class=" ">    <p>
Select <strong class=" ">Empty Connector Project</strong> to use a boiler plate project.    </p>
</li><li class=" ">    <p>
Enter a name and directory name for your project.    </p>
</li></ul><div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">$ appc generate</code></div>
<div class="line"><code class="plain">Appcelerator Command-Line Interface, version </code><code class="value">0.2</code><code class="plain">.</code><code class="value">230</code></div>
<div class="line"><code class="plain">Copyright (c) </code><code class="value">2014</code><code class="plain">-</code><code class="value">2015</code><code class="plain">, Appcelerator, Inc.  All Rights Reserved.</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="plain">? What type of component would you like to generate? Arrow Component</code></div>
<div class="line"><code class="plain">? What Arrow component would you like to generate? Arrow Connector</code></div>
<div class="line"><code class="plain">? Which Connector would you like to generate? Empty Connector Project</code></div>
<div class="line"><code class="plain">? What is the connector name? sample.connector</code></div>
<div class="line"><code class="plain">? Which directory to generate into? sample.connector</code></div>
</div>
</div>    </div>
    <div class="section section-3 " id="43300774_ArrowConnectorProject-TesttheConnector">
        <h3 class="heading "><span>Test the Connector</span></h3>
    <p>
Like an Arrow Builder project, you can locally run the Arrow Connector project and make APIs calls to it.  From the project directory, execute:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">appc run</code></div>
</div>
</div>    <p>
Once the server starts, you can make cURL or other requests to the server. Open the admin console, then go to the <strong class=" ">API Docs</strong> tab to retrieve the cURL commands for the methods.  Copy and paste a command in a terminal to test it.    </p>
    </div>
    <div class="section section-3 " id="43300774_ArrowConnectorProject-PublishtheConnector">
        <h3 class="heading "><span>Publish the Connector</span></h3>
    <p>
To publish the connector, execute the following command from the project directory:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">appc publish</code></div>
</div>
</div>    <p>
By default, the access level for the connector is set to private, so only the creator can access the connector.  To share the connector with other people or publicly, specify a different access level with the <tt class=" ">appc access</tt> command and add people or orgs to your component using the <tt class=" ">appc user</tt> and <tt class=" ">appc org</tt> commands.    </p>
    </div>
    </div>
    <div class="section section-2 " id="43300774_ArrowConnectorProject-ConnectorLogic">
        <h2 class="heading "><span>Connector Logic</span></h2>
    <p>
Place all the connector logic in the <tt class=" ">lib</tt> folder.  There must be an <tt class=" ">index.js</tt> file in your <tt class=" ">lib</tt> folder, which is the first file loaded by the connector.  You can have additional JavaScript file, which can be loaded by the <tt class=" ">lib/index.js</tt> file.    </p>
    <p>
The connector logic needs to expose a <tt class=" ">create()</tt> method, which is passed the Arrow class and a server instance.  The method must return a Connector instance, which is created using the <tt class=" ">Arrow.Connector.extend()</tt> method.  Pass the <tt class=" ">extend()</tt> method an object, which implements the methods of the Connector class and a few methods from the Model class.    </p>
    <p>
The boiler plate project already contains a default <tt class=" ">index.js</tt> you can use, which implements a simple in-memory connector.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">lib/index.js</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="comments">// Example</code></div>
<div class="line"><code class="plain">exports.create = function(Arrow, server) {</code></div>
<div class="line"><code class="plain">    var Connector = Arrow.Connector;</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">return</code><code class="plain"> Connector.extend({</code></div>
<div class="line"><code class="plain">        defaultConfig: require(</code><code class="string">&apos;fs&apos;</code><code class="plain">).readFileSync(__dirname + </code><code class="string">&apos;/../conf/example.config.js&apos;</code><code class="plain">, </code><code class="string">&apos;utf8&apos;</code><code class="plain">),</code></div>
<div class="line"><code class="plain">        connect: function (callback) {</code></div>
<div class="line"><code class="plain">            </code><code class="comments">// Connect to the data source</code></div>
<div class="line"><code class="plain">            callback();</code></div>
<div class="line"><code class="plain">        }</code></div>
<div class="line"><code class="plain">    });</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div>    <div class="section section-3 " id="43300774_ArrowConnectorProject-Initialization">
        <h3 class="heading "><span>Initialization</span></h3>
    <p>
If you need to add some custom initialization logic when creating the connector, implement the following methods.  The connector instance is the value passed to <tt class=" ">this</tt> in the functions.  The functions do not take any arguments or return any values:    </p>
    <div class="tablewrap">
        <table class="confluenceTable">
        <thead class=" ">    <tr>
            <td class="confluenceTh" rowspan="1" colspan="1">
        <p>
Method Signature    </p>
            </td>
                <td class="confluenceTh" rowspan="1" colspan="1">
        <p>
Description    </p>
            </td>
        </tr>
</thead><tfoot class=" "/><tbody class=" ">    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
constructor(void)    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
Use to execute some custom logic when the connector is created.    </p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
postCreate(void)    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
Use to execute some custom logic after the connector instance is created but before its returned.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    <p>
    </p>
    </div>
    <div class="section section-3 " id="43300774_ArrowConnectorProject-ConnectionLifecycle">
        <h3 class="heading "><span>Connection Lifecycle</span></h3>
    <p>
When the connector is loaded, the following methods are executed (in order and if defined).  You do not need to implement any of the methods.   Each method is passed a callback.  After completing the operation, invoke the callback function and pass it an Error object (or null if successful) as the first parameter, and the results of the operation as the second parameter.  None of the methods have a return value.    </p>
    <div class="tablewrap">
        <table class="confluenceTable">
        <thead class=" ">    <tr>
            <td class="confluenceTh" rowspan="1" colspan="1">
        <p>
Method Signature    </p>
            </td>
                <td class="confluenceTh" rowspan="1" colspan="1">
        <p>
Description    </p>
            </td>
                <td class="confluenceTh" rowspan="1" colspan="1">
        <p>
Result to Pass to the Callback    </p>
            </td>
        </tr>
</thead><tfoot class=" "/><tbody class=" ">    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
        <p class="p1">
fetchMetadata(callback)    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
Retrieves the metadata of the data source. The metadata is used to validate the configuration object.    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
Metadata object. Set the <tt class=" ">fields</tt> key to an array of Arrow Metadata objects to verify the keys in the configuration object.    </p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
        <p class="p1">
fetchConfig(callback)    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
Retrieves the configuration of the data source.    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
Configuration object. Key-value pairs describing the configuration of the connector.    </p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
connect(callback)    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
Connects to the data source.    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
None.    </p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
        <p class="p1">
fetchSchema(callback)    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
Retrieves the model schema of the data source.    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
Schema object.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-3 " id="43300774_ArrowConnectorProject-CRUDMethods">
        <h3 class="heading "><span>CRUD Methods</span></h3>
    <p>
To access data from the Connector, you need to implement the following methods.  Each method is passed the Model class as it first parameter and a callback as its last parameter.  After completing the operation, invoke the callback function and pass it an Error object (or null if successful) as the first parameter, and the results of the operation as the second parameter.  None of the methods have a return value.    </p>
    <div class="tablewrap">
        <table class="confluenceTable">
        <thead class=" ">    <tr>
            <td class="confluenceTh" rowspan="1" colspan="1">
        <p>
Method Signature    </p>
            </td>
                <td class="confluenceTh" rowspan="1" colspan="1">
        <p>
Description    </p>
            </td>
                <td class="confluenceTh" rowspan="1" colspan="1">
        <p>
Result to Pass to the Callback    </p>
            </td>
        </tr>
</thead><tfoot class=" "/><tbody class=" ">    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
create(Model, values, callback)    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
Creates a new model using the passed values.    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
New model    </p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
delete(Model, instance, callback)    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
Deletes the model instance.    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
Deleted model    </p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
deleteAll(Model, callback)    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
Deletes all the models.    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
Array of deleted models    </p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
findAll(Model, callback)    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
Retrieves all the models.    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
Array of models    </p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
findOne(Model, id, callback)    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
Retrieves one model with the specified ID (<tt class=" ">id</tt> parameter).    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
A model    </p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
query(Model, options, callback)    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
Retrieves all models based on the query options.    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
Array of found models    </p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
save(Model, instance, callback)    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
Updates the model instance.    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
Updated model    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-3 " id="43300774_ArrowConnectorProject-RequestLifecycle">
        <h3 class="heading "><span>Request Lifecycle</span></h3>
    <p class="p1">
If a request requires a login or if you want to intercept the request before or after it completes, you can implement the following methods:    </p>
    <div class="tablewrap">
        <table class="confluenceTable">
        <thead class=" ">    <tr>
            <td class="confluenceTh" rowspan="1" colspan="1">
        <p>
Method Signature    </p>
            </td>
                <td class="confluenceTh" rowspan="1" colspan="1">
        <p>
Description    </p>
            </td>
        </tr>
</thead><tfoot class=" "/><tbody class=" ">    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
startRequest(methodName, args, request, next)    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p class="p1">
Request interceptor invoked before the request is initiated and the login method is invoked. The method is passed the name of the method that started the request and the arguments passed to the method. Invoke the next function when the operation completes.    </p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
loginRequired(request, callback)    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
Determines if the request required a login. Pass an error message (or null if succesful) as the first parameter to callback and a boolean value indicating if the login method needs to be execute (true) or not (false) as the second parameter.    </p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
login(request, next)    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
Logs in to the data source to make a request. Invoke the next function when the operation completes.    </p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
endRequest(methodName, args, request, next)    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
Request interceptor invoked after the request completes. The method is passed the name of the method that started the request and the arguments passed to the method. Invoke the next function when the operation completes.    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    </div>
    <div class="section section-2 " id="43300774_ArrowConnectorProject-ConnectorConfigurationFile">
        <h2 class="heading "><span>Connector Configuration File</span></h2>
    <p>
To have the Appcelerator CLI create a default configuration file for your connector when it is installed, create a sample configuration file that exports a JSON object in the <tt class=" ">conf</tt> directory, then reference the file in the connector logic with the <tt class=" ">defaultConfig</tt> property in the implementation object passed to the <tt class=" ">Arrow.Connector.extend()</tt> method.    </p>
    <p>
For example, create a file called <tt class=" ">example.config.js</tt> in the <tt class=" ">conf</tt> directory and add the following content to it:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">conf/example.config.js</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">module.exports = {</code></div>
<div class="line"><code class="plain">    connectors: {</code></div>
<div class="line"><code class="plain">        </code><code class="string">&apos;connector.name&apos;</code><code class="plain">: {</code></div>
<div class="line"><code class="plain">            setting1: </code><code class="string">&apos;foo&apos;</code><code class="plain">,</code></div>
<div class="line"><code class="plain">            setting2: </code><code class="string">&apos;bar&apos;</code><code class="plain">,</code></div>
<div class="line"><code class="plain">            setting3: </code><code class="string">&apos;baz&apos;</code></div>
<div class="line"><code class="plain">        }</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain">};</code></div>
</div>
</div>    <p>
Then reference the file in the connector logic using the <tt class=" ">defaultConfig</tt> property:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">lib/index.js</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">exports.create = function(Arrow, server) {</code></div>
<div class="line"><code class="plain">    var Connector = Arrow.Connector;</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">return</code><code class="plain"> Connector.extend({</code></div>
<div class="line"><code class="plain">        defaultConfig: require(</code><code class="string">&apos;fs&apos;</code><code class="plain">).readFileSync(__dirname + </code><code class="string">&apos;/../conf/example.config.js&apos;</code><code class="plain">, </code><code class="string">&apos;utf8&apos;</code><code class="plain">),</code></div>
<div class="line"><code class="plain">        connect: function (callback) {</code></div>
<div class="line"><code class="plain">            </code><code class="comments">// Connect to the data source</code></div>
<div class="line"><code class="plain">            callback();</code></div>
<div class="line"><code class="plain">        }</code></div>
<div class="line"><code class="plain">    });</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div>    <p>
When the Appcelerator CLI installs the connector, it will copy and rename the file to the Arrow Builder project&apos;s <tt class=" ">conf</tt>.    </p>
    </div>
    <div class="section section-2 " id="43300774_ArrowConnectorProject-ModelsandAPIEndpoints">
        <h2 class="heading "><span>Models and API Endpoints</span></h2>
    <p>
To allow an Arrow application to interact with the connector, you need to create a model definition file to define the schema of the data from the connector for the Arrow project to access. For more details about creating a model, see <a class="document-link " href="#!/guide/Arrow_Models">Arrow Models</a>.    </p>
    <p>
By default, when you install a connector, it will add its API endpoints to the Arrow application.  If you do not want to generate these API endpoints, set the <tt class=" ">modelAutogen</tt> key to <tt class=" ">false</tt> in the connector&apos;s configuration file in the Arrow project.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">conf/myconnector.default.js</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">module.exports = {</code></div>
<div class="line"><code class="plain">    connectors: {</code></div>
<div class="line"><code class="plain">        </code><code class="string">&apos;connector.name&apos;</code><code class="plain">: {</code></div>
<div class="line"><code class="plain">            setting1: </code><code class="string">&apos;foo&apos;</code><code class="plain">,</code></div>
<div class="line"><code class="plain">            setting2: </code><code class="string">&apos;bar&apos;</code><code class="plain">,</code></div>
<div class="line"><code class="plain">            setting3: </code><code class="string">&apos;baz&apos;</code><code class="plain">,</code></div>
<div class="line"><code class="plain">            modelAutogen: </code><code class="keyword">false</code></div>
<div class="line"><code class="plain">        }</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain">};</code></div>
</div>
</div>    </div>
    <div class="section section-2 " id="43300774_ArrowConnectorProject-DeclareDependencies">
        <h2 class="heading "><span>Declare Dependencies</span></h2>
    <p>
The application can import any third-party modules that are supported by standard Node.js applications. Before publishing the app to the cloud, make sure all dependencies are listed in the <tt class=" ">dependencies</tt> field in the application&apos;s <tt class=" ">package.json</tt> file. For example, to add support for MongoDB 1.2.0 or greater:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">package.json</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    </code><code class="string">&quot;dependencies&quot;</code><code class="plain">:{ </code><code class="string">&quot;mongodb&quot;</code><code class="plain">: </code><code class="string">&quot;&gt;1.2.0&quot;</code><code class="plain"> }</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div>    </div>
        </div><a id="editButton" href="https://wiki.appcelerator.org/pages/editpage.action?pageId=43300774"><span>Edit</span></a>
    
        <div class="footer">
            Created with <a href="http://k15t.com/display/web/Scroll-Wiki-EclipseHelp-Exporter-for-Confluence" target="_blank">Scroll EclipseHelp Exporter for Confluence</a>.
        </div>
    </div>
</body>
</html>
